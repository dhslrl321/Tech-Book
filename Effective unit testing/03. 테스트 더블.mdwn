# 차이

- spy
  - 상태를 갖음
- mock
  - mocking 하는 사람이 자의적으로 재설정
  - 상태를 갖지 않음
- fake
  - 실제로 로직이 들어감
  - 상태를 유지하고 싶음
  - dummy idgenerator
- stub
  - 영향을 주지 않도록 빠르고 간결하게 시작
  - 짧고 빠르게 적용할 수 있다

# 중요한것

이들을 언제 어디서 어떻게 쓸것인지 잘 판단해야함

---

# 테스트 더블

- 종종 어떤 코드 조각이 원하는 동작을 올바로 수행하는지 검증하려 할 때, 주변 코드를 모두 교체하여 테스트 환경 전반을 통제할 수 있다면 가장 좋다.
  - 테스트 대상 sut 와 협력 객체를 잘 분리

# 테스트 더블 종류

1. 테스트 스텁
2. 가짜 객체
3. 테스트 스파이
4. mock 객체

## 1. 테스트 스텁, Stub

- 원래의 구현을 최대한 단순한 것으로 대체
  - 하드코딩도 괜찮다
  - void 메서드는 텅 비게 해도 된다
- 하나의 테스트 케이스에만 구체화

## 2. 가짜 객체, Fake

- 테스트 스텁보다 정성이 꽤 들어간 테스트 더블
- 스텁은 하나의 케이스에 대해서만 구체화 되어있다면 fake 는 진째 객체의 행동을 흉내

# 이런 테스트 더블을 사용하기 위해서는?

- 구체적인 것에 의존해서는 안된다
  - 할 수 있긴 할듯
- new 는 해롭다
  - di 가 안되기 때문에 테스트 더블을 주입하기 어렵다
